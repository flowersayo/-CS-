# 이상 현상이 뭘까요?

**데이터베이스를 잘못 설계하면 불필요한 데이터 중복이 발생하여 릴레이션에 대한 데이터의 삽입/수정/삭제 연산을 수행할 때 부작용이 발생하는 것.**

# 삽입 이상(Insertion Anomaly)에 대해서 설명해주세요.

**새 데이터를 삽입**하기 위해 **아직 존재하지 않는 불필요한 데이터도 함께 삽입**해야 하는 문제를 말합니다.
![Untitled (10)](https://github.com/flowersayo/-CS-/assets/86418674/96a68652-988e-4cb5-bd95-2fa4b000e4a0)


ex) 이벤트 번호가 pk 지만 아직 참여한 이벤트가 없어서 NULL 값으로 들어감 → 삽입 불가

# 갱신 이상(Update Anomaly)에 대해서 설명해주세요.

중복 투플 중 일부만 변경하여 데이터가 불일치하게 되는 모순의 문제를 말합니다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/b19e4487-dfef-4395-9201-8b3dc303ca25/5ae12f8f-26d7-413c-94dc-5a472f93a3de/Untitled.png)

ex) 등급이 gold → vip 로 상승하였지만, 일부만 수정되면 서로 다른 등급을 가지는 모순 발생

# 삭제 이상(Deletion Anomaly)에 대해서 설명해주세요.

투플을 삭제하면 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실의 문제를 말합니다.
![Untitled (11)](https://github.com/flowersayo/-CS-/assets/86418674/afaa231a-882b-4f46-b2e5-244c02a470cb)


ex) 이벤트 참여를 취소하여 관련 투플을 삭제하려고 하는데, 고객 정보까지 같이 삭제된다.

# 함수 종속성이 무엇인가요?

하나의 릴레이션을 구성하는 속성들의 부분 집합을 X와 Y라 할 때, **어느 시점에서든 릴레이션 내의 모든 투플에서 X값에 대한 Y 값이 항상 하나면** **"X가 Y를 함수적으로 결정한다."** 또는 **"Y가 X에 함수적으로 종속되어 있다."** 라고 합니다.

![Untitled (12)](https://github.com/flowersayo/-CS-/assets/86418674/e8567bb0-dd8b-4355-8934-09a1ee7d9dac)

ex) 아래 예시에서 고객아이디가 고객이름과 등급을 함수적으로 결정한다.
![Untitled (13)](https://github.com/flowersayo/-CS-/assets/86418674/b475ca65-ef9a-4d3f-af1b-1374d2a25093)

# 완전 함수적 종속은 뭔가요?

**릴레이션에서 속성 집합 Y가 속성 집합 X 전체에 종속된 것**

![Untitled (14)](https://github.com/flowersayo/-CS-/assets/86418674/f0d467f5-ac9c-481f-bd3e-454e263d0da2)

ex) 고객아이디 → 고객이름, {고객아이디,이벤트번호} → 당첨여부

# 부분 함수적 종속은 뭔가요?

**속성 집합 Y가 속성 집합 X의 전체가 아닌 일부분에도 함수적으로 종속되는 것** 

![Untitled (15)](https://github.com/flowersayo/-CS-/assets/86418674/247b1acb-a336-4983-9cb4-520e85b22214)

ex) {고객아이디,이벤트번호} → 고객이름

# 이행적 함수적 종속은 뭔가요?

릴레이션을 구성하는 3개의 속성 집합 X, Y, Z에 대해 함수 종 속 **관계 X — Y와 Y — Z가 존재하면 논리적으로 X -> Z가 성립합니다.** 이때 속성 집합 Z가 속성 집합 X에 이행적으로 함수 종속되었다고 합니다.
![Untitled (16)](https://github.com/flowersayo/-CS-/assets/86418674/bb817e53-04db-45eb-bf78-909e786c7a70)

**이행적 함수 종속 관계가 존재한다면, 이 같은 함수 종속 관계의 의미가 유지되도록 분해해야 한다.**

⇒ 즉, X와 Y 속성 집합의 릴레이션과 Y와 Z 속성 집합 의 릴레이션으로 분해해야합니다.

# 정규화(Normalization)에 대해서 설명해주세요.

이상현상이 발생하는 이유는 **관련이 없는 속성들을 하나의 릴레이션에 모아두고 있기 때문입니다.**

따라서 **관련 있는 속성들로만 릴레이션을 구성**해야 하는데 이때 정규화를 사용합니다.

정규화는 **이상현상을 제거하면서 릴레이션을 분해**하는 과정입니다. 정규화를 수행하기 전에 릴레이션을 구성하는 속성들 간의 관련성인 **함수적 종속성**을 판단해야 합니다.

# 제 1 정규형에 대해서 설명해주세요.

> 릴레이션이 속한 모든 속성의 도메인이 **원자 값으로만 구성**되어 있으면 **제 1정규형**에 속한다.

예를 들어 아래처럼 하나의 속성에 여러 값이 들어가 있는 **다중 값 속성은 제 1 정규형을 만족하지 못합니다.**
![Untitled (17)](https://github.com/flowersayo/-CS-/assets/86418674/989c0d99-33be-4c2b-9987-f5cc4c9dd467)

그러나 1정규형을 만족하도록 정규화를 수행하면 하나의 속성에 하나의 값만 들어가게 됩니다.
![Untitled (18)](https://github.com/flowersayo/-CS-/assets/86418674/6f3ec82a-31a7-478f-94d0-6f65694517ff)

# 제 2 정규형에 대해서 설명해주세요.

> 릴레이션이 제 1정규형에 속하고, **기본키가 아닌 모든 속성이 기본키에 완전 함수 종속**되면 제 2정규형에 속한다.
> 

**부분 함수 종속을 제거**하고 **모든 속성이 기본키에 완전 함수 종속되도록 릴레이션을 분해**하는 정규화 과정을 거쳐야 합니다. 다음과 같이 이벤트 참여 릴레이션을 두 개의 릴레이션으로 나누면 등급과 할인율 속성에 대한 데이터 중복이 줄어듭니다.
![Untitled (19)](https://github.com/flowersayo/-CS-/assets/86418674/c9f81f3e-a04d-4bb5-88b1-9c8d81292c01)


# 제 3 정규형에 대해서 설명해주세요.

> 릴레이션이 제 2정규형에 속하고,
**기본키가 아닌 모든 속성이 기본키에 이행적 함수 종속이 되지 않으면 제 3정규형에 속한다.**
> 
![Untitled (20)](https://github.com/flowersayo/-CS-/assets/86418674/f8e0e851-5b1f-4373-965f-cff3a19a441d)


⇒ 릴레이션을 분해하면 하나의 릴레이션에 하나의 관계만 존재하게 되어 이행적 함수 종속으로 인한 이상 현상이 발생하지 않게 됩니다.

# BCNF 정규형에 대해서 설명해주세요.

> 릴레이션의 함수 종속 관계에서 **모든 결정자가 후보키**이면 **보이스 / 코드 정규형**에 속한다.
> 

하나의 릴레이션에 **여러 개의 후보키가 존재**한다면 제3 정규형을 만족하더라도 **이상 현상이 발생**할 수 있습니다.
![Untitled (21)](https://github.com/flowersayo/-CS-/assets/86418674/9839164d-b940-4ef3-af0a-14484e1a914e)
![Untitled (22)](https://github.com/flowersayo/-CS-/assets/86418674/4062a30d-82a1-4b9e-af7c-010bc3da0f7e)
![Untitled (23)](https://github.com/flowersayo/-CS-/assets/86418674/ef30f613-d1e5-40f9-a268-6b586af5740e)


- 담당강사번호 속성이 **후보키가 아님에도 인터넷강좌 속성을 결정**하므로 강좌신청 릴레 이션은 BCNF 정규형에는 속하지 않습니다.

# 반정규화에 대해서 설명해주세요.

정규화는 데이터 조회(select) 시에 조인(join)을 유발하기 때문에 CPU와 메모리를 많이 사용합니다.

반정규화란 데이터베이스의 **성능 향상을 위하여, 데이터 중복을 허용하고 조인을 줄이는 데이터베이스 성능 향상 기법입니다.**
